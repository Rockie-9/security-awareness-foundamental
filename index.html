<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIP Training Deck: Securing Our Future</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/umd/lucide-react.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;900&family=JetBrains+Mono:wght@400;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #020617; /* slate-950 */
            color: #e2e8f0; /* slate-200 */
        }
        
        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out forwards;
        }
        .animate-slideUp {
            animation: slideUp 0.3s ease-out forwards;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a; 
        }
        ::-webkit-scrollbar-thumb {
            background: #334155; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569; 
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        const { 
            Shield, Lock, Smartphone, UserX, AlertTriangle, 
            Eye, Ear, Mic, Share2, Briefcase, Coffee, 
            ChevronRight, ChevronLeft, CheckCircle, XCircle, 
            Server, FileText, X, Menu, Maximize, Minimize,
            LayoutGrid
        } = lucideReact;

        // --- Data Structure for Slides ---
        const slides = [
          {
            id: 1,
            title: "PIP IS LIFE",
            subtitle: "Professional Information Protection: A 24/7 Mindset",
            type: "title",
            icon: <Shield className="w-16 h-16 md:w-24 md:h-24 text-cyan-400" />,
            script: "Welcome. Today, we aren't just talking about rules. We are talking about a mindset. We call it PIP: Professional Information Protection. You might think security is about firewalls. It’s not. It’s about Life. It protects Our life as a company and Your life—your career and reputation. Let’s begin."
          },
          {
            id: 2,
            title: "The 24/7 Mindset",
            type: "content",
            layout: "split",
            leftContent: (
              <div className="flex flex-col items-center justify-center h-full opacity-50 grayscale py-8 md:py-0">
                <div className="text-5xl md:text-6xl font-bold line-through decoration-red-500 text-slate-400">9-to-5</div>
                <p className="mt-4 text-lg md:text-xl text-slate-500">The Old Way</p>
              </div>
            ),
            rightContent: (
              <div className="flex flex-col items-center justify-center h-full text-cyan-400 py-8 md:py-0">
                <div className="text-5xl md:text-6xl font-bold animate-pulse">24/7</div>
                <p className="mt-4 text-lg md:text-xl">The Reality</p>
                <p className="mt-4 md:mt-8 text-center text-white text-base md:text-lg px-4">"You are the Perimeter."</p>
              </div>
            ),
            script: "The biggest mistake new hires make is thinking security is a '9-to-5' job. The reality is: PIP is a 24/7 Mindset. When you leave this building, you carry the secret in your head. Whether at a cafe or dinner table, YOU are the perimeter."
          },
          {
            id: 3,
            title: "Global Security Management (GSM)",
            type: "content",
            layout: "three-col",
            items: [
              { title: "IT Security", icon: <Server />, desc: "Cyber Defense & Networks", color: "text-blue-400" },
              { title: "Physical Security", icon: <Lock />, desc: "Site Integrity & Access", color: "text-green-400" },
              { title: "PIP", icon: <UserX />, desc: "People, Process & Secrets", color: "text-purple-400" }
            ],
            script: "What does our immune system look like? It has three divisions. 1. IT Security (Digital). 2. Physical Security (Site). 3. PIP (People & Process). This is where YOU come in."
          },
          {
            id: 4,
            title: "The Human Bridge",
            type: "diagram",
            visual: "bridge",
            script: "Threats can't usually jump our firewalls. They need a Bridge. YOU are that bridge. You can be the Target (tricked), the Carrier (accidental), or the Amplifier (using trust to spread risk). Pull up the drawbridge."
          },
          {
            id: 5,
            title: "The Golden Rule: Need to Know",
            type: "content",
            layout: "quadrant",
            items: [
              { title: "SEE", icon: <Eye />, desc: "Eyes on your own screen." },
              { title: "HEAR", icon: <Ear />, desc: "Walk away from sensitive talks." },
              { title: "SPEAK", icon: <Mic />, desc: "Secure zones only." },
              { title: "SHARE", icon: <Share2 />, desc: "Verify necessity first." }
            ],
            script: "How do we stop being the bridge? The Golden Rule: Authorization + Necessity. Apply it to your senses: See only what you must. Hear only what concerns you. Speak only in secure zones. Share only if strictly necessary."
          },
          {
            id: 6,
            title: "Trap #1: The 'Smart' Device",
            type: "alert",
            icon: <Smartphone className="w-12 h-12 md:w-16 md:h-16 text-red-500" />,
            list: [
              "Personal Smart Phones",
              "Unlisted Smart Watches",
              "Smart Glasses",
              "Docking Stations"
            ],
            warning: "Forbidden: Recording, Storage, Transmission",
            script: "Trap #1. The rule is strict. Personal phones, watches, glasses, and docks are prohibited. Why? Because they Record, Store, and Transmit. Perform a 'Self-Check' before you hit the gate."
          },
          {
            id: 7,
            title: "Trap #2: Tailgating",
            type: "content",
            layout: "center-focus",
            mainText: "ONE BADGE. ONE PERSON.",
            subText: "Politeness is a Security Gap.",
            script: "Trap #2. We hold doors to be polite. But that door protects your colleagues. When you let a stranger in, you unlock your colleagues' safety. The rule is absolute: One Badge. One Person."
          },
          {
            id: 8,
            title: "Trap #3: Labeling",
            type: "pyramid",
            levels: [
              { label: "AA / A (Top Secret)", color: "bg-red-600" },
              { label: "B (Confidential)", color: "bg-orange-500" },
              { label: "C (Internal)", color: "bg-yellow-500" },
              { label: "No Restriction", color: "bg-green-500" }
            ],
            footer: "Unsure? Choose the HIGHEST level.",
            script: "Trap #3. Our systems rely on labels. Know the hierarchy: AA is our Crown Jewels. If you create it, you label it. If you are unsure, always mark it AA. Over-protect rather than leak."
          },
          {
            id: 9,
            title: "Trap #4: Double Device Risk",
            type: "split-warning",
            left: { title: "The Action", text: "Installing Work Apps on Personal Phone" },
            right: { title: "The Consequence", text: "Legal Seizure of Personal Device" },
            script: "Trap #4. Do not install Teams or Outlook on your personal phone. If a legal investigation happens, authorities can SEIZE your personal phone. Your private photos become evidence. Segregation is Safety."
          },
          {
            id: 10,
            title: "Trap #5: Phishing Protocol",
            type: "steps",
            steps: ["STOP", "CHECK", "CALL"],
            desc: "Panic is the Hack.",
            script: "Trap #5. Phishing targets your emotions (Fear/Urgency). When you feel panic, STOP. CHECK the sender. CALL the person. Don't let them hack your brain."
          },
          {
            id: 11,
            title: "Trap #6: AI & The EU AI Act",
            type: "comparison",
            bad: { title: "Public AI (ChatGPT)", desc: "Your Input = Training Data" },
            good: { title: "tGenie (Internal)", desc: "Compliant, Private, Safe" },
            script: "Trap #6. The EU AI Act sets the standard. We must know where data goes. Public AI trains on your input. Do not use it. Use tGenie—our internal, compliant LLM. Keep us legal."
          },
          {
            id: 12,
            title: "Work-Life Balance",
            type: "image-text",
            icon: <Coffee className="w-16 h-16 text-yellow-400" />,
            text: "The Ultimate Security Feature is Separation.",
            sub: "Leave work at work. Protect your peace of mind.",
            script: "Trap #7 is failing to disconnect. When you leave, leave work behind. Talk about hobbies, not deadlines. By separating work and life, you protect the secrets and your own mental health."
          },
          {
            id: 13,
            title: "Consequences",
            type: "alert",
            icon: <AlertTriangle className="w-12 h-12 md:w-16 md:h-16 text-orange-500" />,
            list: [
              "Termination",
              "Legal Action",
              "Failed Reference Checks"
            ],
            warning: "Intent ≠ Outcome",
            script: "Intent does not change the outcome. An accidental leak destroys value. The unseen impact? Your future career. A security termination fails your future reference checks. Don't risk it."
          },
          {
            id: 14,
            title: "Resources & Pledge",
            type: "resources",
            items: ["Direct Supervisor", "Info Guardian", "Security Portal", "Digital Assistant"],
            pledge: "I protect the innovation that builds our future.",
            script: "You are not alone. Ask your Info Guardian. Ask your Supervisor. Security is about knowing who to ask. Your signature today is your promise."
          }
        ];

        const quizQuestions = [
          { q: "A friend asks about a secret project. You trust them.", options: ["Tell vaguely", "Say nothing ('PIP is Life')", "Show a photo"], correct: 1, hint: "Trust is not a security clearance." },
          { q: "You have Smart Glasses that look normal. Can you wear them inside?", options: ["Yes, if off", "No", "Only in cafeteria"], correct: 1, hint: "If it records, stores, or transmits, it stays out." },
          { q: "Colleague with coffee asks you to hold the door.", options: ["Hold it", "Ask them to swipe", "Squeeze in"], correct: 1, hint: "Politeness is a bridge for threats." },
          { q: "You are unsure how to label a file.", options: ["Leave blank", "Mark AA (Highest)", "Ask a friend"], correct: 1, hint: "Always over-protect." },
          { q: "URGENT email: 'Password Expiry'. What do you do?", options: ["Click link", "STOP - CHECK - CALL", "Reply email"], correct: 1, hint: "Panic is the hack." },
          { q: "You need AI to debug code.", options: ["ChatGPT", "tGenie", "Bard"], correct: 1, hint: "Public AI trains on your data. tGenie is private." },
          { q: "You have a template from your old job.", options: ["Use it", "Start fresh", "Edit header"], correct: 1, hint: "IP Contamination is theft." },
          { q: "Legal investigation starts. You use personal phone for work.", options: ["Phone is safe", "Authorities can seize it", "Delete apps"], correct: 1, hint: "Double Device = Double Risk." },
          { q: "Who is your department classification expert?", options: ["IT Helpdesk", "Info Guardian", "HR"], correct: 1, hint: "The Guardian knows the specific rules." },
          { q: "Long term risk of security termination?", options: ["None", "Failed Reference Checks", "Small fine"], correct: 1, hint: "The industry is small." }
        ];

        function App() {
          const [currentSlide, setCurrentSlide] = useState(0);
          const [showScript, setShowScript] = useState(false);
          const [quizMode, setQuizMode] = useState(false);
          const [quizIndex, setQuizIndex] = useState(0);
          const [score, setScore] = useState(0);
          const [quizFinished, setQuizFinished] = useState(false);
          const [feedback, setFeedback] = useState(null);
          const [isFullscreen, setIsFullscreen] = useState(false);
          const [showGrid, setShowGrid] = useState(false);
          
          const contentRef = useRef(null);

          useEffect(() => {
            if (contentRef.current) {
                contentRef.current.scrollTop = 0;
            }
          }, [currentSlide, quizMode, quizIndex, showGrid]);

          const toggleFullScreen = () => {
            if (!document.fullscreenElement) {
              document.documentElement.requestFullscreen();
              setIsFullscreen(true);
            } else {
              if (document.exitFullscreen) {
                document.exitFullscreen();
                setIsFullscreen(false);
              }
            }
          };

          const nextSlide = () => {
            if (currentSlide < slides.length - 1) setCurrentSlide(curr => curr + 1);
            else setQuizMode(true);
          };

          const prevSlide = () => {
            if (quizMode) {
                if(window.confirm("Exit assessment? Progress will be lost.")) {
                    setQuizMode(false);
                    setQuizIndex(0);
                    setScore(0);
                    setQuizFinished(false);
                }
            }
            else if (currentSlide > 0) setCurrentSlide(curr => curr - 1);
          };

          const handleAnswer = (index) => {
            if (feedback) return;
            const isCorrect = index === quizQuestions[quizIndex].correct;
            
            if (isCorrect) {
              setScore(s => s + 1);
              setFeedback({ type: 'success', msg: 'Correct!' });
            } else {
              setFeedback({ type: 'error', msg: `Incorrect. Hint: ${quizQuestions[quizIndex].hint}` });
            }

            setTimeout(() => {
              setFeedback(null);
              if (quizIndex < quizQuestions.length - 1) {
                setQuizIndex(i => i + 1);
              } else {
                setQuizFinished(true);
              }
            }, 2500);
          };

          // --- Slide Render Logic ---
          const renderSlideContent = (slide) => {
            switch(slide.type) {
              case "title":
                return (
                  <div className="flex flex-col items-center justify-center h-full text-center animate-fadeIn p-4">
                    <div className="mb-6 md:mb-8 animate-bounce">{slide.icon}</div>
                    <h1 className="text-4xl md:text-7xl font-black text-white mb-4 tracking-tighter">{slide.title}</h1>
                    <h2 className="text-xl md:text-2xl text-cyan-400 font-light">{slide.subtitle}</h2>
                  </div>
                );
              case "content":
                if (slide.layout === "split") {
                  return (
                    <div className="flex flex-col md:flex-row h-full w-full">
                      <div className="w-full md:w-1/2 md:p-8 md:border-r border-b md:border-b-0 border-slate-700 min-h-[200px]">{slide.leftContent}</div>
                      <div className="w-full md:w-1/2 md:p-8 min-h-[200px]">{slide.rightContent}</div>
                    </div>
                  );
                }
                if (slide.layout === "three-col") {
                    return (
                        <div className="flex flex-col md:flex-row justify-around items-center h-full gap-4 md:gap-0 py-8 md:py-0">
                            {slide.items.map((item, idx) => (
                                <div key={idx} className="flex flex-col items-center p-6 bg-slate-800 rounded-xl w-full md:w-1/4 h-auto md:h-64 justify-center border border-slate-700 hover:border-cyan-400 transition-all shadow-lg">
                                    <div className={`${item.color} mb-4`}>{item.icon}</div>
                                    <h3 className="text-xl font-bold text-white mb-2">{item.title}</h3>
                                    <p className="text-center text-slate-400 text-sm">{item.desc}</p>
                                </div>
                            ))}
                        </div>
                    )
                }
                if (slide.layout === "quadrant") {
                    return (
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 h-full p-4 md:p-12 overflow-y-auto">
                             {slide.items.map((item, idx) => (
                                <div key={idx} className="flex flex-col items-center justify-center bg-slate-800/50 rounded-lg border border-slate-700 p-6 md:p-0">
                                     <div className="text-cyan-400 mb-2">{item.icon}</div>
                                     <h3 className="text-xl md:text-2xl font-bold text-white">{item.title}</h3>
                                     <p className="text-slate-400 text-center">{item.desc}</p>
                                </div>
                             ))}
                        </div>
                    )
                }
                if (slide.layout === "center-focus") {
                    return (
                        <div className="flex flex-col items-center justify-center h-full p-4 text-center">
                            <div className="p-8 md:p-12 border-4 border-red-500 rounded-xl bg-red-500/10 w-full md:w-auto">
                                <h1 className="text-3xl md:text-6xl font-black text-white mb-4 leading-tight">{slide.mainText}</h1>
                            </div>
                            <p className="mt-8 text-xl md:text-2xl text-slate-400">{slide.subText}</p>
                        </div>
                    )
                }
                return null;
              case "diagram": 
                return (
                     <div className="flex flex-col md:flex-row items-center justify-between h-full px-4 md:px-12 relative gap-6 md:gap-0 py-8 md:py-0 overflow-y-auto">
                        <div className="w-full md:w-1/4 p-4 md:p-6 bg-red-900/30 border border-red-700 rounded-lg text-center order-1">
                            <h3 className="text-red-500 font-bold mb-1 md:mb-2">THREAT ACTOR</h3>
                            <p className="text-xs text-slate-400">Fear, Urgency, Greed</p>
                        </div>
                        <div className="flex-1 flex flex-col items-center relative mx-4 order-2 w-full">
                            <div className="hidden md:block h-2 w-full bg-slate-600 absolute top-1/2 -z-10"></div>
                            <div className="block md:hidden w-2 h-16 bg-slate-600 mb-2"></div>
                            <div className="p-4 bg-yellow-600/20 border border-yellow-500 rounded-full mb-4">
                                <UserX className="w-12 h-12 text-yellow-500" />
                            </div>
                            <div className="text-center bg-slate-900 px-4 w-full">
                                <h3 className="text-yellow-500 font-bold text-lg md:text-xl">YOU (THE BRIDGE)</h3>
                                <div className="flex flex-wrap justify-center gap-2 mt-2 text-xs text-slate-300">
                                    <span className="px-2 py-1 bg-slate-800 rounded">Target</span>
                                    <span className="px-2 py-1 bg-slate-800 rounded">Carrier</span>
                                    <span className="px-2 py-1 bg-slate-800 rounded">Amplifier</span>
                                </div>
                            </div>
                            <div className="block md:hidden w-2 h-16 bg-slate-600 mt-2"></div>
                        </div>
                        <div className="w-full md:w-1/4 p-4 md:p-6 bg-green-900/30 border border-green-700 rounded-lg text-center order-3">
                            <h3 className="text-green-500 font-bold mb-1 md:mb-2">SECURE CORE</h3>
                            <p className="text-xs text-slate-400">IP, Data, Innovation</p>
                        </div>
                     </div>
                );
              case "alert":
                return (
                    <div className="flex flex-col items-center justify-center h-full p-4 overflow-y-auto">
                        <div className="bg-red-500/20 p-6 md:p-8 rounded-full mb-6 md:mb-8 animate-pulse">
                            {slide.icon}
                        </div>
                        <h2 className="text-2xl md:text-4xl font-bold text-white mb-6 md:mb-8 text-center">PROHIBITED ITEMS</h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 w-full md:w-2/3">
                            {slide.list.map((item, i) => (
                                <div key={i} className="bg-slate-800 p-4 rounded text-center border-l-4 border-red-500 text-white font-mono text-sm md:text-base">
                                    {item}
                                </div>
                            ))}
                        </div>
                        <div className="mt-8 text-red-400 font-bold text-lg md:text-xl uppercase tracking-widest text-center">
                            {slide.warning}
                        </div>
                    </div>
                )
              case "pyramid":
                return (
                    <div className="flex flex-col items-center justify-center h-full p-4">
                        <div className="flex flex-col w-full md:w-2/3 max-w-2xl gap-2">
                            {slide.levels.map((lvl, i) => (
                                <div key={i} className={`${lvl.color} p-3 md:p-4 text-center font-bold text-slate-900 rounded shadow-lg text-sm md:text-base`} style={{width: `${100 - (i * 10)}%`, alignSelf: 'center'}}>
                                    {lvl.label}
                                </div>
                            ))}
                        </div>
                        <p className="mt-8 text-cyan-400 text-lg md:text-xl font-bold text-center">{slide.footer}</p>
                    </div>
                )
              case "split-warning":
                 return (
                     <div className="flex flex-col md:flex-row h-full items-center justify-center gap-6 md:gap-12 p-4 overflow-y-auto">
                         <div className="w-full md:w-1/3 bg-slate-800 p-6 md:p-8 rounded-xl border border-slate-600 opacity-50">
                             <h3 className="text-lg md:text-xl text-slate-400 mb-2 md:mb-4">{slide.left.title}</h3>
                             <p className="text-xl md:text-2xl text-white">{slide.left.text}</p>
                         </div>
                         <div className="text-4xl text-red-500 font-bold rotate-90 md:rotate-0">→</div>
                         <div className="w-full md:w-1/3 bg-red-900/20 p-6 md:p-8 rounded-xl border border-red-500">
                             <div className="flex items-center gap-4 mb-4">
                                <Briefcase className="text-red-500" />
                                <h3 className="text-lg md:text-xl text-red-400">{slide.right.title}</h3>
                             </div>
                             <p className="text-2xl md:text-3xl font-bold text-white">{slide.right.text}</p>
                         </div>
                     </div>
                 )
              case "steps":
                  return (
                      <div className="flex flex-col items-center justify-center h-full p-4 overflow-y-auto">
                          <div className="flex flex-col md:flex-row gap-6 md:gap-8">
                              {slide.steps.map((step, i) => (
                                  <div key={i} className="w-32 h-32 md:w-64 md:h-64 rounded-full bg-slate-800 border-4 md:border-8 border-cyan-500 flex items-center justify-center text-2xl md:text-5xl font-black text-white shadow-[0_0_20px_rgba(6,182,212,0.4)]">
                                      {step}
                                  </div>
                              ))}
                          </div>
                          <p className="mt-8 md:mt-12 text-2xl md:text-3xl text-slate-300 font-light text-center">{slide.desc}</p>
                      </div>
                  )
              case "comparison":
                  return (
                      <div className="flex flex-col md:flex-row h-full w-full">
                          <div className="w-full md:w-1/2 bg-red-900/10 flex flex-col items-center justify-center p-6 md:p-12 border-b md:border-b-0 md:border-r border-slate-700 relative overflow-hidden min-h-[250px]">
                              <div className="absolute inset-0 bg-red-500/5 z-0"></div>
                              <XCircle className="w-16 h-16 md:w-24 md:h-24 text-red-500 mb-4 md:mb-6 z-10" />
                              <h3 className="text-2xl md:text-3xl font-bold text-white z-10 text-center">{slide.bad.title}</h3>
                              <p className="text-red-300 mt-2 md:mt-4 z-10 text-center text-sm md:text-base">{slide.bad.desc}</p>
                          </div>
                          <div className="w-full md:w-1/2 bg-green-900/10 flex flex-col items-center justify-center p-6 md:p-12 relative overflow-hidden min-h-[250px]">
                              <div className="absolute inset-0 bg-green-500/5 z-0"></div>
                              <CheckCircle className="w-16 h-16 md:w-24 md:h-24 text-green-500 mb-4 md:mb-6 z-10" />
                              <h3 className="text-2xl md:text-3xl font-bold text-white z-10 text-center">{slide.good.title}</h3>
                              <p className="text-green-300 mt-2 md:mt-4 z-10 text-center text-sm md:text-base">{slide.good.desc}</p>
                          </div>
                      </div>
                  )
              case "image-text":
                  return (
                      <div className="flex flex-col items-center justify-center h-full text-center p-6">
                          <div className="mb-6 md:mb-8">{slide.icon}</div>
                          <h2 className="text-3xl md:text-5xl font-bold text-white mb-4 md:mb-6 max-w-4xl">{slide.text}</h2>
                          <p className="text-xl md:text-2xl text-cyan-400">{slide.sub}</p>
                      </div>
                  )
              case "resources":
                  return (
                      <div className="flex flex-col items-center justify-center h-full p-4 overflow-y-auto">
                          <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8 w-full md:w-2/3 mb-8 md:mb-12">
                              {slide.items.map((item, i) => (
                                  <div key={i} className="bg-slate-800 p-4 md:p-6 rounded-lg text-center text-lg md:text-xl font-bold text-white border border-slate-600 hover:bg-slate-700 transition-colors">
                                      {item}
                                  </div>
                              ))}
                          </div>
                          <div className="bg-cyan-900/30 p-6 md:p-8 rounded-xl border border-cyan-500 w-full md:w-2/3 text-center">
                              <h3 className="text-cyan-400 uppercase tracking-widest text-xs md:text-sm mb-4">The Pledge</h3>
                              <p className="text-xl md:text-3xl font-serif italic text-white leading-relaxed">"{slide.pledge}"</p>
                          </div>
                      </div>
                  )
              default:
                return <div>Slide Content</div>;
            }
          };

          // --- Quiz Render Logic ---
          const renderQuiz = () => {
            if (quizFinished) {
              const passed = score === quizQuestions.length;
              return (
                <div className="flex flex-col items-center justify-center h-full text-center p-4 animate-fadeIn">
                  {passed ? (
                     <div className="bg-green-500/20 p-6 md:p-12 rounded-2xl border border-green-500 w-full max-w-2xl">
                       <Shield className="w-24 h-24 md:w-32 md:h-32 text-green-500 mx-auto mb-6" />
                       <h1 className="text-3xl md:text-5xl font-bold text-white mb-4">CERTIFIED</h1>
                       <p className="text-lg md:text-xl text-green-300">You are now a Guardian of Innovation.</p>
                       <div className="mt-8 text-5xl md:text-6xl font-black text-white">{score}/{quizQuestions.length}</div>
                     </div>
                  ) : (
                    <div className="bg-red-500/20 p-6 md:p-12 rounded-2xl border border-red-500 w-full max-w-2xl">
                      <AlertTriangle className="w-24 h-24 md:w-32 md:h-32 text-red-500 mx-auto mb-6" />
                      <h1 className="text-3xl md:text-5xl font-bold text-white mb-4">ACCESS DENIED</h1>
                      <p className="text-lg md:text-xl text-red-300">100% Score Required.</p>
                      <div className="mt-8 text-5xl md:text-6xl font-black text-white">{score}/{quizQuestions.length}</div>
                      <button onClick={() => window.location.reload()} className="mt-8 px-6 py-3 bg-red-600 text-white rounded hover:bg-red-700 w-full md:w-auto">Retry Training</button>
                    </div>
                  )}
                </div>
              );
            }

            const q = quizQuestions[quizIndex];
            return (
              <div className="flex flex-col items-center justify-start h-full max-w-4xl mx-auto p-4 md:p-0 pt-8 overflow-y-auto">
                <div className="w-full flex justify-between mb-4 md:mb-8 text-slate-500 font-mono text-sm">
                    <span>ASSESSMENT MODE</span>
                    <span>Q{quizIndex + 1}/{quizQuestions.length}</span>
                </div>
                
                <h2 className="text-2xl md:text-4xl font-bold text-white mb-8 md:mb-12 text-center leading-snug">{q.q}</h2>
                
                <div className="grid grid-cols-1 gap-3 md:gap-4 w-full max-w-2xl">
                  {q.options.map((opt, i) => (
                    <button 
                      key={i}
                      onClick={() => handleAnswer(i)}
                      className="p-4 md:p-6 bg-slate-800 hover:bg-cyan-900 border border-slate-600 hover:border-cyan-400 rounded-xl text-left text-lg md:text-xl text-white transition-all group flex justify-between items-center active:scale-95"
                    >
                      <span>{opt}</span>
                      <ChevronRight className="opacity-100 md:opacity-0 md:group-hover:opacity-100 text-cyan-400" />
                    </button>
                  ))}
                </div>

                {feedback && (
                  <div className={`mt-6 p-4 rounded-lg w-full max-w-2xl text-center font-bold text-lg animate-bounce ${feedback.type === 'success' ? 'bg-green-600 text-white' : 'bg-red-600 text-white'}`}>
                    {feedback.msg}
                  </div>
                )}
              </div>
            );
          };

          // --- Grid View Logic ---
          const renderGrid = () => {
              return (
                <div className="h-full w-full p-6 overflow-y-auto animate-fadeIn">
                    <h2 className="text-2xl font-bold text-white mb-6 border-b border-slate-800 pb-2">Slide Overview</h2>
                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 pb-20">
                        {slides.map((slide, index) => (
                            <button
                                key={slide.id}
                                onClick={() => {
                                    setCurrentSlide(index);
                                    setShowGrid(false);
                                    setQuizMode(false);
                                }}
                                className={`flex flex-col items-center justify-center p-4 rounded-xl border border-slate-700 bg-slate-800/50 hover:bg-cyan-900/20 hover:border-cyan-500 transition-all group relative aspect-video ${currentSlide === index ? 'ring-2 ring-cyan-400 bg-cyan-900/20' : ''}`}
                            >
                                <div className="text-slate-500 group-hover:text-cyan-400 mb-2 scale-75">{slide.icon || <FileText />}</div>
                                <h3 className="text-sm font-bold text-white text-center line-clamp-2">{slide.title}</h3>
                                <span className="absolute top-2 left-2 text-xs font-mono text-slate-500 bg-slate-900 px-1 rounded">{index + 1}</span>
                            </button>
                        ))}
                         <button
                                onClick={() => {
                                    setQuizMode(true);
                                    setShowGrid(false);
                                }}
                                className={`flex flex-col items-center justify-center p-4 rounded-xl border border-slate-700 bg-slate-800/50 hover:bg-cyan-900/20 hover:border-cyan-500 transition-all group relative aspect-video ${quizMode ? 'ring-2 ring-cyan-400 bg-cyan-900/20' : ''}`}
                            >
                                <div className="text-slate-500 group-hover:text-cyan-400 mb-2 scale-75"><Shield /></div>
                                <h3 className="text-sm font-bold text-white text-center">FINAL EXAM</h3>
                                <span className="absolute top-2 left-2 text-xs font-mono text-slate-500 bg-slate-900 px-1 rounded">{slides.length + 1}</span>
                        </button>
                    </div>
                </div>
              );
          };

          return (
            <div className="fixed inset-0 bg-slate-950 text-slate-200 overflow-hidden font-sans flex flex-col">
              {/* Top Bar */}
              <div className="h-14 border-b border-slate-800 flex justify-between items-center px-4 bg-slate-900 z-10 shrink-0">
                <div className="flex items-center gap-2 text-cyan-400 font-bold tracking-widest text-sm md:text-base">
                    <Shield size={18} />
                    <span>PIP<span className="text-white">OS</span> v2.0</span>
                </div>
                
                {/* Mobile Controls */}
                <div className="md:hidden flex items-center gap-2">
                    <button 
                        onClick={() => setShowGrid(!showGrid)}
                        className={`p-2 hover:text-white ${showGrid ? 'text-cyan-400' : 'text-slate-400'}`}
                    >
                        <LayoutGrid size={24} />
                    </button>
                    <button 
                        onClick={toggleFullScreen}
                        className="p-2 text-slate-400 hover:text-white"
                    >
                        {isFullscreen ? <Minimize size={24} /> : <Maximize size={24} />}
                    </button>
                    <button 
                        onClick={() => setShowScript(!showScript)} 
                        className="p-2 text-slate-400 hover:text-white"
                    >
                        <FileText size={24} className={showScript ? "text-cyan-400" : ""} />
                    </button>
                </div>

                {/* Desktop Controls */}
                <div className="hidden md:flex items-center gap-4">
                     <button 
                        onClick={() => setShowGrid(!showGrid)}
                        className={`p-2 hover:text-white ${showGrid ? 'text-cyan-400' : 'text-slate-400'}`}
                        title="Toggle Slide Overview"
                    >
                        <LayoutGrid size={20} />
                    </button>
                     <button 
                       onClick={toggleFullScreen}
                       className="p-2 text-slate-400 hover:text-white"
                       title="Toggle Presentation Mode"
                     >
                       {isFullscreen ? <Minimize size={20} /> : <Maximize size={20} />}
                     </button>
                     <button 
                       onClick={() => setShowScript(!showScript)}
                       className={`px-3 py-1 rounded text-sm font-mono border ${showScript ? 'bg-cyan-900 border-cyan-500 text-white' : 'border-slate-600 text-slate-500'}`}
                     >
                       {showScript ? 'HIDE SCRIPT' : 'SHOW SCRIPT'}
                     </button>
                     <div className="text-slate-500 font-mono text-sm">
                         {quizMode ? 'EXAM' : `SLIDE ${currentSlide + 1}/${slides.length}`}
                     </div>
                </div>
              </div>

              {/* Main Stage */}
              <div className="flex-1 relative flex overflow-hidden">
                <div 
                    ref={contentRef}
                    className={`flex-1 relative transition-all duration-300 overflow-y-auto overflow-x-hidden ${showScript && !quizMode && !showGrid ? 'md:w-3/4' : 'w-full'}`}
                >
                   {showGrid ? renderGrid() : (quizMode ? renderQuiz() : (
                       <div className="min-h-full w-full animate-fadeIn pb-20 md:pb-0">
                           {slides[currentSlide].type !== 'title' && (
                               <div className="p-4 md:px-8 md:pt-8 md:pb-2 border-b border-slate-800/50">
                                   <h2 className="text-2xl md:text-3xl font-bold text-white truncate">{slides[currentSlide].title}</h2>
                               </div>
                           )}
                           <div className="p-0 md:px-8 md:pb-8">
                               {renderSlideContent(slides[currentSlide])}
                           </div>
                       </div>
                   ))}
                   
                   {!quizMode && !showGrid && (
                       <>
                        <button onClick={prevSlide} disabled={currentSlide === 0} className="hidden md:block absolute left-4 top-1/2 -translate-y-1/2 p-2 rounded-full bg-slate-800 text-slate-400 hover:bg-cyan-600 hover:text-white disabled:opacity-30 transition-all z-20">
                            <ChevronLeft size={32} />
                        </button>
                        <button onClick={nextSlide} className="hidden md:block absolute right-4 top-1/2 -translate-y-1/2 p-2 rounded-full bg-slate-800 text-slate-400 hover:bg-cyan-600 hover:text-white transition-all z-20">
                            <ChevronRight size={32} />
                        </button>
                       </>
                   )}
                </div>

                {showScript && !quizMode && !showGrid && (
                    <div className="hidden md:block w-1/4 bg-slate-900 border-l border-slate-800 p-6 overflow-y-auto shadow-2xl h-full">
                        <h3 className="text-slate-500 font-bold text-xs uppercase tracking-widest mb-4">Speaker Notes</h3>
                        <p className="text-lg leading-relaxed text-slate-300 font-serif">
                            {slides[currentSlide].script}
                        </p>
                        <div className="mt-8 p-4 bg-slate-800 rounded border border-slate-700">
                            <h4 className="text-cyan-400 text-sm font-bold mb-2">Key Emphasis</h4>
                            <ul className="list-disc list-inside text-sm text-slate-400 space-y-2">
                                <li>Maintain eye contact.</li>
                                <li>Pause for emphasis on bold words.</li>
                                <li>Check audience engagement.</li>
                            </ul>
                        </div>
                    </div>
                )}
              </div>
              
              {showScript && !quizMode && !showGrid && (
                <div className="md:hidden absolute inset-0 bg-black/60 z-30 flex items-end">
                     <div className="bg-slate-900 w-full max-h-[60%] rounded-t-2xl p-6 overflow-y-auto border-t border-cyan-500 animate-slideUp">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-cyan-400 font-bold text-xs uppercase tracking-widest">Speaker Notes</h3>
                            <button onClick={() => setShowScript(false)}><X className="text-slate-400" /></button>
                        </div>
                        <p className="text-lg leading-relaxed text-slate-200 font-serif">
                            {slides[currentSlide].script}
                        </p>
                     </div>
                </div>
              )}

              {!quizMode && !showGrid && (
                  <div className="md:hidden h-16 bg-slate-900 border-t border-slate-800 flex items-center justify-between px-6 z-20 shrink-0">
                     <button 
                        onClick={prevSlide} 
                        disabled={currentSlide === 0}
                        className="flex items-center gap-2 text-slate-400 disabled:opacity-30 active:text-white"
                     >
                        <ChevronLeft /> <span className="font-bold">PREV</span>
                     </button>
                     
                     <span className="text-slate-600 font-mono text-xs">
                        {currentSlide + 1} / {slides.length}
                     </span>

                     <button 
                        onClick={nextSlide} 
                        className="flex items-center gap-2 text-cyan-400 active:text-white"
                     >
                        <span className="font-bold">NEXT</span> <ChevronRight />
                     </button>
                  </div>
              )}

              <div className="hidden md:flex h-8 bg-slate-900 border-t border-slate-800 justify-between items-center px-4 text-xs font-mono text-slate-600 shrink-0">
                  <div>SECURE CONNECTION ESTABLISHED</div>
                  <div>CONFIDENTIAL // INTERNAL USE ONLY</div>
              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>


